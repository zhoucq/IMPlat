@using Imp.Core.Domain.Users
@model Imp.Admin.Models.Users.UserModel
@{
    ViewBag.Title = "新建用户";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}
@{
    IList<Role> allRoles = ViewBag.AllRoles;
}

@using (Html.BeginForm())
{
    <div class="box round first">
        <h2>新建用户</h2>
        <div class="block">
            <h5>
                <input type="submit" class="btn btn-blue" value="保存" />
                <input type="button" class="btn btn-grey" value="返回" onclick="location.href='@Url.Action("Index", "Doc")    '" />
            </h5>
        </div>

        <table class="form">
            <tr>
                <td class="col1">@Html.LabelFor(m => m.Username)</td>
                <td>@Html.EditorFor(m => m.Username)
                    @Html.ValidationMessageFor(m => m.Username)
                </td>
            </tr>
            <tr>
                <td class="col1">@Html.LabelFor(m => m.Password)</td>
                <td>@Html.PasswordFor(m => m.Password)
                    @Html.ValidationMessageFor(m => m.Password)
                </td>
            </tr>
            <tr>
                <td class="col1">@Html.LabelFor(m => m.Password2)</td>
                <td>@Html.PasswordFor(m => m.Password2)
                    @Html.ValidationMessageFor(m => m.Password2)
                </td>
            </tr>
            <tr>
                <td class="col1">@Html.LabelFor(m => m.DisplayName)</td>
                <td>
                    @Html.EditorFor(m => m.DisplayName)
                    @Html.ValidationMessageFor(m => m.DisplayName)
                </td>
            </tr>
            <tr>
                <td>
                    @Html.LabelFor(m => m.AvailableRoles)
                </td>
                <td>
                    @Html.CheckBoxListFor(m => m.PostedRoles.RoleIds,
                        m => m.AvailableRoles,
                        e => e.Id,
                        e => e.Name,
                        m => m.SelectedRoles)
                    @Html.ValidationMessageFor(m => m.PostedRoles, "必须选择一个角色")
                </td>
            </tr>
        </table>
    </div>
}
